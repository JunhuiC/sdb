<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Sequoia User's Guide</title><meta content="DocBook XSL Stylesheets V1.65.1" name="generator"><link rel="home" href="index.html" title="Sequoia User's Guide"><link rel="next" href="ar01s02.html" title="2.&nbsp;Getting the Software"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Sequoia User's Guide</th></tr><tr><td align="left" width="20%">&nbsp;</td><th align="center" width="60%">&nbsp;</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ar01s02.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="article" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="N10002"></a>Sequoia User's Guide</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Emmanuel</span> <span class="surname">Cecchet</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Julie</span> <span class="surname">Marguerite</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Mathieu</span> <span class="surname">Peltier</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Nicolas</span> <span class="surname">Modrzyk</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Dylan</span> <span class="surname">Hansen</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Nuno</span> <span class="surname">Carvalho</span></h3></div></div></div><div><p class="releaseinfo">Version 2.10</p></div><div><p class="copyright">Copyright &copy; 2002, 2003, 2004, 2005, 2006 French National Institute For Research In Computer Science And Control
        (INRIA), Continuent</p></div><div><div class="legalnotice"><p>Java, and all Java-based trademarks are trademarks or registered trademarks of
        Sun Microsystems, Inc. in the United States and other countries.</p></div></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="index.html#getting_started">1. Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#what_is_sequoia">1.1. What is Sequoia?</a></span></dt><dt><span class="section"><a href="index.html#what_do_i_need_to_use_sequoia">1.2. What do I need to use Sequoia?</a></span></dt><dt><span class="section"><a href="index.html#why_should_i_use_sequoia">1.3. Why should I use Sequoia?</a></span></dt><dt><span class="section"><a href="index.html#how_does_it_works">1.4. How does it work?</a></span></dt><dt><span class="section"><a href="index.html#what_does_it_cost">1.5. What does it cost?</a></span></dt><dt><span class="section"><a href="index.html#what_modifications_are_needed">1.6. What kind of modifications are needed?</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s02.html">2. Getting the Software</a></span></dt><dt><span class="section"><a href="ar01s03.html">3. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s03.html#sequoia_controller_install">3.1. Sequoia Controller</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s03.html#using_java_graphical_installer">3.1.1. Using the Java graphical installer</a></span></dt><dt><span class="section"><a href="ar01s03.html#using_binary_distribution">3.1.2. Using the binary distribution</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s03.html#sequoia_driver_install">3.2. Sequoia Driver</a></span></dt><dt><span class="section"><a href="ar01s03.html#raidb1_out_of_the_box">3.3. Sequoia out of the box</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s04.html">4. Migrating from C-JDBC to Sequoia</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s04.html#what_is_new_with_sequoia">4.1. What is new with Sequoia?</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s04.html#N102B2">4.1.1. Licensing</a></span></dt><dt><span class="section"><a href="ar01s04.html#N102B7">4.1.2. Continuent.org</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s04.html#migrating_cjdbc_config_to_sequoia">4.2. Migrating your C-JDBC configuration to Sequoia</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s05.html">5. Sequoia Driver</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s05.html#driver_overview">5.1. Overview</a></span></dt><dt><span class="section"><a href="ar01s05.html#loading_the_driver">5.2. Loading the Driver</a></span></dt><dt><span class="section"><a href="ar01s05.html#sequoia_jdbc_url">5.3. Sequoia JDBC URL</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s05.html#url_options">5.3.1. URL options</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s05.html#getting_a_connection_using_data_source">5.4. Getting a connection using a data source</a></span></dt><dt><span class="section"><a href="ar01s05.html#stored_procedures">5.5. Stored procedures</a></span></dt><dt><span class="section"><a href="ar01s05.html#using_blobs">5.6. Blobs: Binary Large Objects</a></span></dt><dt><span class="section"><a href="ar01s05.html#using_clobs">5.7. Clobs: Character Large Objects</a></span></dt><dt><span class="section"><a href="ar01s05.html#resultset_streaming">5.8. ResultSet streaming</a></span></dt><dt><span class="section"><a href="ar01s05.html#current_driver_limitations">5.9. Current Limitations</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s06.html">6. Configuring Sequoia with 3rd party software</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s06.html#forenotes">6.1. Forenotes on configuring Sequoia with your application</a></span></dt><dt><span class="section"><a href="ar01s06.html#configuring_sequoia_with_tomcat">6.2. Configuring Sequoia with Jakarta Tomcat</a></span></dt><dt><span class="section"><a href="ar01s06.html#configuring_sequoia_with_jonas">6.3. Configuring Sequoia with JOnAS</a></span></dt><dt><span class="section"><a href="ar01s06.html#configuring_sequoia_with_jboss">6.4. Configuring Sequoia with JBoss</a></span></dt><dt><span class="section"><a href="ar01s06.html#configuring_sequoia_with_weblogic">6.5. Configuring Sequoia with BEA Weblogic Server 7.x/8.x</a></span></dt><dt><span class="section"><a href="ar01s06.html#configuring_sequoia_with_hibernate">6.6. Configuring Sequoia with Hibernate</a></span></dt><dt><span class="section"><a href="ar01s06.html#using_sequence_with_hibernate">6.7. Using sequences with Hibernate, Sequoia and PostgreSQL</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s07.html">7. Sequoia controller</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s07.html#design_overview">7.1. Design Overview</a></span></dt><dt><span class="section"><a href="ar01s07.html#starting_controller">7.2. Starting the Controller</a></span></dt><dt><span class="section"><a href="ar01s07.html#writing_the_controller_config_file">7.3. Writing the controller configuration file</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s07.html#dtd_controller_parameters">7.3.1. Controller Parameters</a></span></dt><dt><span class="section"><a href="ar01s07.html#dtd_controller_internationalization">7.3.2. Internationalization</a></span></dt><dt><span class="section"><a href="ar01s07.html#dtd_controller_report">7.3.3. Report</a></span></dt><dt><span class="section"><a href="ar01s07.html#dtd_controller_jmx">7.3.4. JMX</a></span></dt><dt><span class="section"><a href="ar01s07.html#dtd_controller_database">7.3.5. Virtual Database</a></span></dt><dt><span class="section"><a href="ar01s07.html#dtd_controller_security">7.3.6. Security</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s07.html#configuring_the_log">7.4. Configuring the Log</a></span></dt><dt><span class="section"><a href="ar01s07.html#recovery_log">7.5. Recovery Log</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s07.html#N107E4">7.5.1. A practical example</a></span></dt><dt><span class="section"><a href="ar01s07.html#understanding_checkpoints">7.5.2. Understanding checkpoints</a></span></dt><dt><span class="section"><a href="ar01s07.html#N10809">7.5.3. A fault tolerant Recovery Log</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s07.html#controller_replication">7.6. Controller replication</a></span></dt><dt><span class="section"><a href="ar01s07.html#current_controller_limitations">7.7. Current Limitations</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s08.html">8. Administration console</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s08.html#jmx_notifications">8.1. Jmx Notifications List</a></span></dt><dt><span class="section"><a href="ar01s08.html#starting_console">8.2. Starting the Administration Console</a></span></dt><dt><span class="section"><a href="ar01s08.html#console_quickstart">8.3. Console Quickstart</a></span></dt><dt><span class="section"><a href="ar01s08.html#console_main_menu">8.4. Console Main Menu</a></span></dt><dt><span class="section"><a href="ar01s08.html#administrator_menu">8.5. Administrator Menu</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s08.html#administrator_standard_commands">8.5.1. Administrator Standard Commands</a></span></dt><dt><span class="section"><a href="ar01s08.html#administrator_expert_commands">8.5.2. Administrator Expert Commands</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s08.html#automated_backup_with_jmx">8.6. Automated Backup With Jmx</a></span></dt><dt><span class="section"><a href="ar01s08.html#recovering_from_a_failed_controller_in_distributed_mode">8.7. Recoverying from a failed controller in distributed mode</a></span></dt><dt><span class="section"><a href="ar01s08.html#virtual_database_console_menu">8.8. Virtual Database Console Menu</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s09.html">9. RAIDb Basics</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s09.html#raidb_definitions">9.1. RAIDb Definition</a></span></dt><dt><span class="section"><a href="ar01s09.html#raidb0">9.2. RAIDb-0</a></span></dt><dt><span class="section"><a href="ar01s09.html#raidb1">9.3. RAIDb-1</a></span></dt><dt><span class="section"><a href="ar01s09.html#raidb2">9.4. RAIDb-2</a></span></dt><dt><span class="section"><a href="ar01s09.html#nested_raidb_levels">9.5. Nested RAIDb Levels</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s10.html">10. Virtual database configuration</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s10.html#writing_a_virtual_database_configuration_file">10.1. Writing a Virtual Database Configuration File</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_virtualdatabase">10.2. Virtual Database</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s10.html#distribution">10.2.1. Distribution</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_sql_monitoring">10.2.2. Monitoring</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s10.html#dtd_backupmanager">10.3. Backup Manager</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_authenticationmanager">10.4. Authentication Manager</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_databasebackend">10.5. Database Backend</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s10.html#dtd_rewriting_rules">10.5.1. Rewriting requests on backends</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_databaseschema">10.5.2. Database Schema Definition</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_connectionmanager">10.5.3. Connection Manager</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s10.html#dtd_requestmanager">10.6. Request Manager</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s10.html#dtd_macrohandler">10.6.1. Macros Handler</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_requestscheduler">10.6.2. Request Scheduler</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_requestcache">10.6.3. Request Cache</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_loadbalancer">10.6.4. Load Balancer</a></span></dt><dt><span class="section"><a href="ar01s10.html#dtd_recoverylog">10.6.5. Recovery Log</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s10.html#ssl_configuration">10.7. SSL Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s10.html#ssl_controller">10.7.1. Controller</a></span></dt><dt><span class="section"><a href="ar01s10.html#ssl_console_clients">10.7.2. Console / Jmx Clients</a></span></dt><dt><span class="section"><a href="ar01s10.html#ssl_driver">10.7.3. Driver</a></span></dt><dt><span class="section"><a href="ar01s10.html#ssl_certificates">10.7.4. Certificates (public and private keys)</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s10.html#configuration_examples">10.8. Configuration Examples</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s11.html">11. Glossary</a></span></dt><dt><span class="section"><a href="ar01s12.html">12. About Sequoia</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s12.html#license">12.1. License</a></span></dt><dt><span class="section"><a href="ar01s12.html#web_sites">12.2. Web Site</a></span></dt><dt><span class="section"><a href="ar01s12.html#mailing_lists">12.3. Mailing Lists</a></span></dt><dt><span class="section"><a href="ar01s12.html#reporting_bug">12.4. Reporting a Bug</a></span></dt><dt><span class="section"><a href="ar01s12.html#getting_involved">12.5. Getting Involved</a></span></dt><dt><span class="section"><a href="ar01s12.html#about_continuent">12.6. About Continuent.org</a></span></dt><dt><span class="section"><a href="ar01s12.html#about_inria">12.7. About INRIA</a></span></dt><dt><span class="section"><a href="ar01s12.html#about_objectweb">12.8. About ObjectWeb</a></span></dt></dl></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="getting_started"></a>1.&nbsp;Getting Started</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="what_is_sequoia"></a>1.1.&nbsp;What is Sequoia?</h3></div></div><div></div></div><p>Sequoia is a database cluster middleware that allows any <span class="trademark">Java</span>&trade; application (standalone application, 
        servlet or <span class="trademark">EJB</span>&trade; container, ...) to 
        transparently access a cluster of databases through <span class="trademark">JDBC</span>&trade;. You do not have to modify client 
        applications, application servers or database server software. You just 
        have to ensure that all database accesses are performed through 
        Sequoia.</p><p>Sequoia is a <span class="emphasis"><em>free</em></span>, <span class="emphasis"><em>open source</em></span>
        project that is the continuation of the <a href="http://c-jdbc.objectweb.org" target="_top">C-JDBC project</a> hosted by the
          <a href="http://www.objectweb.org/" target="_top">ObjectWeb Consortium</a>.
        Sequoia is licensed under an <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_top">Apache v2
        license</a> is licensed whereas C-JDBC is available under the <a href="http://www.gnu.org/copyleft/lesser.html" target="_top">GNU Lesser General Public
        License</a> (LGPL).</p><p>Sequoia also provides driver for non-Java applications. These developments
        are hosted in the <a href="http://carob.continuent.org" target="_top">Carob
        project</a>. An Eclipse plug-in for Sequoia is also available in the <a href="http://oak.continuent.org" target="_top">Oak project</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="what_do_i_need_to_use_sequoia"></a>1.2.&nbsp;What do I need to use Sequoia?</h3></div></div><div></div></div><p>In order to use Sequoia, you will need:</p><div class="itemizedlist"><ul type="disc"><li><p>a client application that accesses a database through 
            JDBC,</p></li><li><p>a <span class="trademark">JDK</span>&trade; 1.4 (or greater) compliant
              <span class="trademark">Java Virtual Machine</span>&trade;
            (JVM)<sup>[<a href="#ftn.N10093" name="N10093">1</a>]</sup>,</p></li><li><p>a database with a JDBC driver (type 1, 2, 3 or 4) or an ODBC 
            driver used with the JDBC-ODBC bridge.</p></li><li><p>a network supporting TCP/IP communications between your cluster 
            nodes.</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.gif"></td><th align="left">Note</th></tr><tr><td valign="top" align="left" colspan="2"><p>If your client application does not use JDBC, you can use the C++ API or the ODBC
          driver provided by the <a href="http://carob.continuent.org/" target="_top">Carob
          project </a>.</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="why_should_i_use_sequoia"></a>1.3.&nbsp;Why should I use Sequoia?</h3></div></div><div></div></div><p>You have a Java application or a Java-based application server that 
        accesses one or several databases. The database tier becomes the 
        bottleneck of your application or it is a single point of failure or 
        both. Sequoia can help you resolve these problems by providing:</p><div class="itemizedlist"><ul type="disc"><li><p>performance scalability by adding database nodes and balancing 
            the load among these nodes.</p></li><li><p>high availability of the database tier, i.e. Sequoia tolerates 
            database crashes and offers transparent failover using database 
            replication techniques.</p></li><li><p>improved performance with fine grain query caching and 
            transparent connection pooling.</p></li><li><p>SQL traffic logging for performance monitoring and 
            analysis.</p></li><li><p>support for clusters of heterogeneous database engines.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="how_does_it_works"></a>1.4.&nbsp;How does it work?</h3></div></div><div></div></div><p>Sequoia provides a flexible architecture that allows you to achieve 
        scalability, high availability and failover with your database tier. 
        Sequoia implements the concept of RAIDb: <span class="emphasis"><em>Redundant Array of 
        Inexpensive Databases</em></span> (see <a href="ar01s09.html" title="9.&nbsp;RAIDb Basics">Section&nbsp;9, &ldquo;RAIDb Basics&rdquo;</a>). 
        The database is distributed and replicated among several nodes and 
        Sequoia load balances the queries between these nodes.</p><p>Sequoia provides a generic JDBC driver to be used by the clients 
        (see <a href="ar01s05.html" title="5.&nbsp;Sequoia Driver">Section&nbsp;5, &ldquo;Sequoia Driver&rdquo;</a>). This driver forwards the SQL 
        requests to the Sequoia controller (see <a href="ar01s07.html" title="7.&nbsp;Sequoia controller">Section&nbsp;7, &ldquo;Sequoia controller&rdquo;</a>) that balances them on a cluster of 
        databases (reads are load balanced and writes are broadcasted). Sequoia 
        can be used with any RDBMS (Relational DataBase Management System) 
        providing a JDBC driver, that is to say almost all existing open source 
        and commercial databases. <a href="index.html#fig_sequoia_principle" title="Figure&nbsp;1.&nbsp;Sequoia principle">Figure&nbsp;1, &ldquo;Sequoia principle&rdquo;</a> gives 
        an overview of the Sequoia principle.</p><div class="figure"><a name="fig_sequoia_principle"></a><p class="title"><b>Figure&nbsp;1.&nbsp;Sequoia principle</b></p><div class="mediaobject" align="center"><img src="images/sequoia_principle.gif" align="middle" alt="Sequoia principle"></div></div><p>Sequoia allows to build any cluster configuration including mixing 
        database engines from different vendors. The main features provided by 
        Sequoia are performance scalability, fault tolerance and high 
        availability. Additional features such as monitoring, logging, SQL 
        requests caching are provided as well.</p><p>The architecture is widely open to allow anyone to plug custom 
        requests schedulers, load balancers, connection managers, caching 
        policies, ...</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="what_does_it_cost"></a>1.5.&nbsp;What does it cost?</h3></div></div><div></div></div><p>From a software point of view, Sequoia is an open-source software licensed under
        Apache v2 License which means that it is free of charge for any usage (personal or
        commercial). If you are using commercial RDBMS (such as Oracle, DB2, ...), you will
        have to buy extra licenses for the nodes where you install replicas of the database.
        But you can possibly use open-source databases to host replicas of your main
        database.</p><p>You need to buy extra machines if you want more performance and more fault
        tolerance. Sequoia has been designed to work with standard off-the-shelf
        workstations because it primarily targets low cost open-source solutions but it can
        work as well with large SMP machines. A standard Ethernet network is sufficient to
        achieve good performance.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="what_modifications_are_needed"></a>1.6.&nbsp;What kind of modifications are needed?</h3></div></div><div></div></div><p>You <span class="emphasis"><em>do not have to change anything</em></span> to your 
        application or your database.</p><p>You only have to update the JDBC driver configuration used by your 
        application (usually it is just a configuration file update) and to 
        setup a Sequoia configuration file (see <a href="ar01s10.html" title="10.&nbsp;Virtual database configuration">Section&nbsp;10, &ldquo;Virtual database configuration&rdquo;</a>).</p></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10093" name="ftn.N10093">1</a>] </sup>Sequoia may work with older JVM version, but hasn't been
            tested.</p></div></div></div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%">&nbsp;</td><td align="center" width="20%">&nbsp;</td><td align="right" width="40%">&nbsp;<a accesskey="n" href="ar01s02.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td valign="top" align="left" width="40%">&nbsp;</td><td align="center" width="20%">&nbsp;</td><td valign="top" align="right" width="40%">&nbsp;2.&nbsp;Getting the Software</td></tr></table></div></body></html>